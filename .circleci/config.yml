version: 2.1

setup: true

orbs:
  path-filtering: circleci/path-filtering@0.0.2

workflows:
  setup:
    jobs:
      - path-filtering/filter:
          # Only set run-infrastructure to true if any folders containing terraform that would be run have changed:
          mapping: |
            src/.* run-build true
          base-revision: main
          config-path: .circleci/workflows.yml
